<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8">
  <title th:text="'Detalle · ' + ${juego.titulo}">Detalle de juego</title>

  <!-- Bootstrap 5 por CDN -->
  <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous"
  >

  <!-- Tu hoja de estilos global -->
  <link rel="stylesheet" th:href="@{/css/app.css}">
</head>
<body class="app-body">

<div class="container py-4">

  <!-- Encabezado con botones arriba a la derecha -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <span class="pill">Backlog de videojuegos</span>
      <h1 class="h4 mb-0" th:text="${juego.titulo}">Título del juego</h1>
      <small class="text-secondary">
        Detalle del juego y tu progreso personal.
      </small>
    </div>
    <div class="text-end">
      <a th:href="@{/}" class="btn btn-outline-light btn-sm mb-1">
        ← Volver al inicio
      </a>
      <br>
      <a th:href="@{/dashboard}" class="btn btn-outline-success btn-sm">
        Ver dashboard
      </a>
    </div>
  </div>

  <!-- Tarjeta con portada + datos -->
  <div class="row g-3">
    <!-- Portada -->
    <div class="col-md-4">
      <div class="card bg-dark text-light h-100 shadow-sm">
        <div class="card-body d-flex flex-column align-items-center">
          <img th:if="${juego.portada != null}"
               th:src="${juego.portada}"
               alt="Portada del juego"
               class="img-fluid rounded mb-2 detail-cover-img">

          <div th:if="${juego.portada == null}"
               class="detail-cover-placeholder d-flex align-items-center justify-content-center w-100 rounded mb-2">
            <span class="text-secondary">Sin portada</span>
          </div>

          <span class="badge bg-secondary mt-1" th:text="${juego.plataforma}">PLATAFORMA</span>
        </div>
      </div>
    </div>

    <!-- Información del juego -->
    <div class="col-md-8">
      <div class="card bg-dark text-light h-100 shadow-sm">
        <div class="card-body">
          <h2 class="h5 mb-3">Información del juego</h2>

          <dl class="row mb-0">
            <dt class="col-sm-4 text-secondary">Género</dt>
            <dd class="col-sm-8" th:text="${juego.genero}">RPG</dd>

            <dt class="col-sm-4 text-secondary">Año lanzamiento</dt>
            <dd class="col-sm-8" th:text="${juego.anioLanzamiento}">2000</dd>

            <dt class="col-sm-4 text-secondary">Desarrollador</dt>
            <dd class="col-sm-8" th:text="${juego.desarrollador}">Square</dd>

            <dt class="col-sm-4 text-secondary">Editora</dt>
            <dd class="col-sm-8" th:text="${juego.editora}">SquareSoft</dd>

            <dt class="col-sm-4 text-secondary">Horas jugadas</dt>
            <dd class="col-sm-8" th:text="${juego.horasJugadas}">40</dd>

            <dt class="col-sm-4 text-secondary">Puntaje</dt>
            <dd class="col-sm-8" th:text="${juego.puntaje}">9.5</dd>

            <dt class="col-sm-4 text-secondary">Estado</dt>
            <dd class="col-sm-8" th:text="${juego.estadoTermino}">COMPLETADO</dd>
          </dl>

          <hr class="border-secondary">

          <h3 class="h6 text-uppercase text-secondary">Descripción</h3>
          <p th:text="${juego.descripcion}">Descripción del juego…</p>

          <h3 class="h6 text-uppercase text-secondary mt-3">Notas</h3>
          <p th:text="${juego.notas}">Notas personales del juego…</p>

          <h3 class="h6 text-uppercase text-secondary mt-3">Etiquetas</h3>
          <p th:if="${#lists.isEmpty(juego.etiquetasNombres)}" class="mb-0">
            Sin etiquetas.
          </p>
          <div th:if="${!#lists.isEmpty(juego.etiquetasNombres)}" class="mb-0">
                        <span class="pill me-1 mb-1"
                              th:each="tag : ${juego.etiquetasNombres}"
                              th:text="${tag}">
                            Acción
                        </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Botones de acción debajo, centrados, sin tarjeta -->
  <div class="text-center mt-4">
    <a th:href="@{|/juegos/${juego.id}/editar|}"
       class="btn btn-primary btn-sm me-2">
      Editar
    </a>

    <form th:action="@{|/juegos/${juego.id}/eliminar|}"
          method="post"
          style="display:inline;"
          onsubmit="return confirm('¿Seguro que deseas eliminar este juego?');">
      <button type="submit" class="btn btn-outline-danger btn-sm">
        Eliminar
      </button>
    </form>
  </div>

</div>

<!-- Bootstrap JS (opcional) -->
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous">
</script>

</body>
</html>